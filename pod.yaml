apiVersion: v1
kind: Pod
metadata:
  name: test-tunnel
  annotations:
    tunnel/port: "1234"
    tunnel/dns: |
      169.254.20.10: default.svc.cluster.local svc.cluster.local cluster.local europe-west1-c.c.gowish-devx.internal c.gowish-devx.internal google.internal psa-develop.gowish-internal gowish.gowish-internal
    tunnel/routes: |
      172.23.0.0/16 
      172.20.248.0/22
      169.254.20.10/32
      10.0.0.0/8

spec:
  restartPolicy: Always
  containers:
  - name: tunnel
    imagePullPolicy: Always
    image: ghcr.io/mikkelsnitker/tunnel:latest
    
    env:
      - name: TUNNEL_PORT
        value: "1234"
      - name: TUNNEL_NETWORK
        value: "10.0.0.1/24"
      - name: TUNNEL_MTU
        value: 1300
    securityContext:
      capabilities:
        add:
          - NET_ADMIN
      privileged: true
    stdin: true
    tty: true

